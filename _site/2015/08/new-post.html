<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Remaking a Tufte Weather Visualization</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="http://bradleyboehmke.github.io//css/main.css">
    <link rel="canonical" href="http://bradleyboehmke.github.io/http://bradleyboehmke.github.io//2015/08/new-post.html">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="http://bradleyboehmke.github.io/">Bradley Boehmke</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//about/">About</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//categoryview/">Archive</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//cv/">CV</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//tutorials/">Tutorials</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//tutorials/scraping_with_apis_DSCOE.Rmd">Scraping Data with APIs</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Remaking a Tufte Weather Visualization</h1>
    <p class="post-meta">Aug 28, 2015 &nbsp; • &nbsp; Categories: 
      
            &nbsp;<a href="http://bradleyboehmke.github.io/categoryview/#programming" style="color: rgb(128,128,128)">programming</a>
      
            &nbsp;<a href="http://bradleyboehmke.github.io/categoryview/#visualization" style="color: rgb(128,128,128)">visualization</a>
      
            &nbsp;<a href="http://bradleyboehmke.github.io/categoryview/#weather" style="color: rgb(128,128,128)">weather</a>
      
       &nbsp; • &nbsp; Tags: 
      
            &nbsp;<a href="http://bradleyboehmke.github.io/categoryview/#r" style="color: rgb(128,128,128)">r</a>
      
            &nbsp;<a href="http://bradleyboehmke.github.io/categoryview/#ggplot2" style="color: rgb(128,128,128)">ggplot2</a>
      
    </p>
      
      <br>
      
  </header>

  <article class="post-content">
    <p>This report provides insight and explanation behind the code used to produce the following graphic which is formatted to resemble the illustration provided in Edward Tufte’s classic book <u>Visual Display of Quantitative Information</u>, 2<sup>nd</sup> Ed. <em>(page 30)</em>.</p>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-1-1.png" alt="plot of chunk unnamed-chunk-1" /> 
<!--more--></p>

<p><br /></p>

<h3 id="font-faceseriftuftes-imagefont"><font face="serif">Tufte's Image</font></h3>
<p>The original illustration in Tufte’s book comes from <em>The New York Times</em>, January 4, 2004, A15.  Although the original graphic had two parts; the temperature component, as shown in the below image, and then a precipitation compenent, I chose to only focus on the temperature component since I could not locate historical precipitation data. I should also point out that the original graphic was based on daily high and low temperatures, whereas my graphic is based on daily average temperatures.  This is likely the reason for the different “thickness” in the range bands and also the reason why the original graphic uses range bars for the current year temps and my graphic uses lines.  It is my assumption that the original graphics <em>“Normal Range”</em>, which is the center dark band, represents the mean high and mean low temps for each day.  Since I only have the daily average temps, my <em>“Normal Range”</em> represents the 95% confidence interval around the historical mean daily average temps <em>(thats right, it’s an average of an average…just lovely! But since we’re reflecting the same measurement for a single group and, for the most part, all days have the same number of observations our interpretation is not being skewed.)</em></p>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/tufte_original.JPG" alt="Original_Illustration" /></p>

<h3 id="font-faceserifr-packages-utilizedfont"><font face="serif">R Packages Utilized</font></h3>
<p>The following packages were used to develop the visualization.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Preprocessing &amp; summarizing data
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span>

<span class="c1"># Visualizatin development
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span></code></pre></figure>

<p><br /></p>

<h3 id="font-faceserifgetting--preparing-the-datafont"><font face="serif">Getting &amp; Preparing the Data</font></h3>
<p>The data used was obtained from the University of Dayton’s <a href="http://academic.udayton.edu/kissock/http/Weather/">Average Daily Temperature archive</a> website which contains daily average temperatures for 157 U.S. and 167 international cities with data spanning from January 1, 1995 to present.  Individual text files are provided for each city and the raw data represents month, day, year, and average daily temperature (°F) and looks like:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">##   V1 V2   V3   V4
## 1  1  1 1995 39.0
## 2  1  2 1995 19.6
## 3  1  3 1995 20.6
## 4  1  4 1995 11.3
## 5  1  5 1995  6.8
## 6  1  6 1995 23.0</code></pre></figure>

<p>First, I process the raw data to create a “Past” dataframe, which represent 1995-2013 data.  This, ultimately, will be the background data to compare the current year data against.  I create a new variable <em>(“newDay”)</em> that labels observations <em>(aka days)</em> from 1 to 365, which will represent the x-axis.  I filter out missing data, represented by the value -99 <em>(there were only 16 days across all 20 years with missing data - 0.002% observations)</em>, and remove current year data.  Next, I identify the <em>min</em> and <em>max</em> value for each day; this will create the wider wheat colored band in the background that represents the record high and low average temps for the past 20 years.  I then calculate the mean temp for each day along with the 95% confidence interval to represent the darker brown color which represents the <em>Normal Range</em>.</p>

<p>I also create a “Present” dataframe, which represents current year <em>(2014)</em> data.  I create a matching x-axis variable <em>(“newDay”)</em> and filter out missing data <em>(turns out there were no missing data for 2014)</em>.  This data will represent the black line in the graphic.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># rename variables
</span><span class="n">names</span><span class="p">(</span><span class="n">DAY</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="s2">"Month"</span><span class="p">,</span> <span class="s2">"Day"</span><span class="p">,</span> <span class="s2">"Year"</span><span class="p">,</span> <span class="s2">"Temp"</span><span class="p">)</span>

<span class="c1"># create dataframe that represents 1995-2013 historical data
</span><span class="n">Past</span> <span class="o">&lt;-</span> <span class="n">DAY</span> <span class="o">%&gt;%</span>
        <span class="n">group_by</span><span class="p">(</span><span class="n">Year</span><span class="p">,</span> <span class="n">Month</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">arrange</span><span class="p">(</span><span class="n">Day</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">ungroup</span><span class="p">()</span> <span class="o">%&gt;%</span>
        <span class="n">group_by</span><span class="p">(</span><span class="n">Year</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">mutate</span><span class="p">(</span><span class="n">newDay</span> <span class="o">=</span> <span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="n">length</span><span class="p">(</span><span class="n">Day</span><span class="p">)))</span> <span class="o">%&gt;%</span>   <span class="c1"># label days as 1:365 (will represent x-axis)         
</span>        <span class="n">ungroup</span><span class="p">()</span> <span class="o">%&gt;%</span>
        <span class="n">filter</span><span class="p">(</span><span class="n">Temp</span> <span class="o">!=</span> <span class="m">-99</span> <span class="o">&amp;</span> <span class="n">Year</span> <span class="o">!=</span> <span class="m">2014</span><span class="p">)</span> <span class="o">%&gt;%</span>     <span class="c1"># filter out missing data (identified with '-99' value) &amp; current year data
</span>        <span class="n">group_by</span><span class="p">(</span><span class="n">newDay</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">mutate</span><span class="p">(</span><span class="n">upper</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">Temp</span><span class="p">),</span> <span class="c1"># identify max value for each day
</span>               <span class="n">lower</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">Temp</span><span class="p">),</span> <span class="c1"># identify min value for each day
</span>               <span class="n">avg</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">Temp</span><span class="p">),</span>  <span class="c1"># calculate mean value for each day
</span>               <span class="n">se</span> <span class="o">=</span> <span class="n">sd</span><span class="p">(</span><span class="n">Temp</span><span class="p">)</span><span class="o">/</span><span class="n">sqrt</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">Temp</span><span class="p">)))</span> <span class="o">%&gt;%</span>  <span class="c1"># calculate standard error of mean
</span>        <span class="n">mutate</span><span class="p">(</span><span class="n">avg_upper</span> <span class="o">=</span> <span class="n">avg</span><span class="o">+</span><span class="p">(</span><span class="m">2.101</span><span class="o">*</span><span class="n">se</span><span class="p">),</span>  <span class="c1"># calculate 95% CI for mean
</span>               <span class="n">avg_lower</span> <span class="o">=</span> <span class="n">avg</span><span class="o">-</span><span class="p">(</span><span class="m">2.101</span><span class="o">*</span><span class="n">se</span><span class="p">))</span> <span class="o">%&gt;%</span>  <span class="c1"># calculate 95% CI for mean
</span>        <span class="n">ungroup</span><span class="p">()</span>

<span class="c1"># create dataframe that represents current year data
</span><span class="n">Present</span> <span class="o">&lt;-</span> <span class="n">DAY</span> <span class="o">%&gt;%</span>
        <span class="n">group_by</span><span class="p">(</span><span class="n">Year</span><span class="p">,</span> <span class="n">Month</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">arrange</span><span class="p">(</span><span class="n">Day</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">ungroup</span><span class="p">()</span> <span class="o">%&gt;%</span>
        <span class="n">group_by</span><span class="p">(</span><span class="n">Year</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">mutate</span><span class="p">(</span><span class="n">newDay</span> <span class="o">=</span> <span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="n">length</span><span class="p">(</span><span class="n">Day</span><span class="p">)))</span> <span class="o">%&gt;%</span>  <span class="c1"># create matching x-axis as historical data
</span>        <span class="n">ungroup</span><span class="p">()</span> <span class="o">%&gt;%</span>
        <span class="n">filter</span><span class="p">(</span><span class="n">Temp</span> <span class="o">!=</span> <span class="m">-99</span> <span class="o">&amp;</span> <span class="n">Year</span> <span class="o">==</span> <span class="m">2014</span><span class="p">)</span>  <span class="err">#</span> <span class="n">filter</span> <span class="n">out</span> <span class="n">missing</span> <span class="n">data</span> <span class="o">&amp;</span> <span class="n">select</span> <span class="n">current</span> <span class="n">year</span> <span class="n">data</span></code></pre></figure>

<p>With the primary data in place, which allows me to match Tufte’s illustration closely, I decided that adding one more comparable dimension to our data would be interesting.  We had a harsh winter in 2014 so I was curious as to how many days we had in which the average daily temperature was colder than all previous years.  I figured while assessing this, I might as well compare the current year highs versus historical record highs as well <em>(record high and lows meaning the highest average daily temp and the lowest average daily temp)</em>.</p>

<p>To add this dimension to the graphic, I create dataframes to represent the days in which the current year had the coldest temperature than all previous 19 years <em>(“PresentLows”)</em> and days in which the current year had the warmest temperature than all previous 19 years <em>(“PresentHighs”)</em>.  This data will be used to represent the blue and red points on the graphic.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># create dataframe that represents the lowest temp for each day for the historical data
</span><span class="n">PastLows</span> <span class="o">&lt;-</span> <span class="n">Past</span> <span class="o">%&gt;%</span>
        <span class="n">group_by</span><span class="p">(</span><span class="n">newDay</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">summarise</span><span class="p">(</span><span class="n">Pastlow</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">Temp</span><span class="p">))</span> <span class="c1"># identify lowest temp for each day from 1995-2013
</span>
<span class="c1"># create dataframe that identifies the days in 2014 in which the temps were lower than all previous 19 years
</span><span class="n">PresentLows</span> <span class="o">&lt;-</span> <span class="n">Present</span> <span class="o">%&gt;%</span>
        <span class="n">left_join</span><span class="p">(</span><span class="n">PastLows</span><span class="p">)</span> <span class="o">%&gt;%</span>  <span class="c1"># merge historical lows to current year low data
</span>        <span class="n">mutate</span><span class="p">(</span><span class="n">record</span> <span class="o">=</span> <span class="n">ifelse</span><span class="p">(</span><span class="n">Temp</span><span class="o">&lt;</span><span class="n">Pastlow</span><span class="p">,</span> <span class="s2">"Y"</span><span class="p">,</span> <span class="s2">"N"</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="c1"># identifies if current year was record low
</span>        <span class="n">filter</span><span class="p">(</span><span class="n">record</span> <span class="o">==</span> <span class="s2">"Y"</span><span class="p">)</span>  <span class="c1"># filter for days that represent current year record lows
</span>
<span class="c1"># create dataframe that represents the highest temp for each day for the historical data
</span><span class="n">PastHighs</span> <span class="o">&lt;-</span> <span class="n">Past</span> <span class="o">%&gt;%</span>
        <span class="n">group_by</span><span class="p">(</span><span class="n">newDay</span><span class="p">)</span> <span class="o">%&gt;%</span>
        <span class="n">summarise</span><span class="p">(</span><span class="n">Pasthigh</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">Temp</span><span class="p">))</span>  <span class="c1"># identify highest temp for each day from 1995-2013
</span>
<span class="c1"># create dataframe that identifies the days in 2014 in which the temps were higher than all previous 19 years
</span><span class="n">PresentHighs</span> <span class="o">&lt;-</span> <span class="n">Present</span> <span class="o">%&gt;%</span>
        <span class="n">left_join</span><span class="p">(</span><span class="n">PastHighs</span><span class="p">)</span> <span class="o">%&gt;%</span>  <span class="c1"># merge historical highs to current year low data
</span>        <span class="n">mutate</span><span class="p">(</span><span class="n">record</span> <span class="o">=</span> <span class="n">ifelse</span><span class="p">(</span><span class="n">Temp</span><span class="o">&gt;</span><span class="n">Pasthigh</span><span class="p">,</span> <span class="s2">"Y"</span><span class="p">,</span> <span class="s2">"N"</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="c1"># identifies if current year was record high
</span>        <span class="n">filter</span><span class="p">(</span><span class="n">record</span> <span class="o">==</span> <span class="s2">"Y"</span><span class="p">)</span>  <span class="err">#</span> <span class="n">filter</span> <span class="k">for</span> <span class="n">days</span> <span class="n">that</span> <span class="n">represent</span> <span class="n">current</span> <span class="n">year</span> <span class="n">record</span> <span class="n">highs</span></code></pre></figure>

<p>Lastly, to create the appropriate y-axis, I need to generate a function to turn the y-axis labels into the appropriate format with the degree symbol (°) after the numbers.  I then create a variable that represents the y-axis labels I want to display using <code class="highlighter-rouge">seq()</code> and apply the degree formatting function to these labels.  I save it as variable “a” to be used later in my ggplot code.</p>

<p>The final data I need to process is to create a small line that will represent the legend symbol for the 2014 Temperature.  In Tufte’s illustration, the highs and lows data for each day were available so it made sense to represent the current year bars; however, in my case I only have access to the average daily temperature for each day.  Since I don’t have a range of data for the individual days in 2014, I can only represent the data by a single line.  This, ultimately, is why my legend differs slightly compared to the original graphic.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># function to turn y-axis labels into degree formatted values
</span><span class="n">dgr_fmt</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="k">...</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">parse</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">paste</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">"*degree"</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s2">""</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1"># create y-axis variable
</span><span class="n">a</span> <span class="o">&lt;-</span> <span class="n">dgr_fmt</span><span class="p">(</span><span class="n">seq</span><span class="p">(</span><span class="m">-20</span><span class="p">,</span><span class="m">100</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="m">10</span><span class="p">))</span>

<span class="c1"># create a small dataframe to represent legend symbol for 2014 Temperature
</span><span class="n">legend_data</span> <span class="o">&lt;-</span> <span class="n">data.frame</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">seq</span><span class="p">(</span><span class="m">175</span><span class="p">,</span><span class="m">182</span><span class="p">),</span><span class="n">y</span><span class="o">=</span><span class="n">rnorm</span><span class="p">(</span><span class="m">8</span><span class="p">,</span><span class="m">15</span><span class="p">,</span><span class="m">2</span><span class="p">))</span></code></pre></figure>

<p><br /></p>

<h3 id="font-faceserifcreating-the-visual-graphicfont"><font face="serif">Creating the Visual Graphic</font></h3>
<p>Now that the data is ready, I can begin developing the illustration.  The important thing to remember is that graphics should be built on layers.  This is important because it helps you to organize your visualization steps and forces you to think about smaller details and where, in the graphic building process, they should be developed.  To explain the logic I’ll go through chunks of the development process to illustrate how the layers create their given effects.</p>

<p><br /></p>

<h4 id="ufont-faceserifstep-1fontu"><u><font face="serif">Step 1</font></u></h4>
<p>The first thing I like to do is to create my “canvas”.  In this case, the underlying theme is very basic with no borders and custom gridlines.  I say “custom gridlines” for two reasons.  First, the x-axis gridlines intend to separate the months; however, the real x-axis is number of days from 1 to 365.  Since the length of months are irregular <em>(31 days, 30 days, 28 days, etc)</em>, we will manually insert x-axis gridlines.  The second reason for custom gridlines is, if you look at Tufte’s original illustration, you will notice that the y-axis gridlines lay on top of the data.  This allows the white y-axis gridlines to blend into white space <em>(reducing ink ratio)</em> but to show up on top of the data to provide reference points.  Since gridlines in ggplot are always the first layer, we need to remove these gridlines and incorporate our own later in the process.</p>

<p>To begin, I’ll remove all basic theme layers.  This includes removing background color; major and minor gridlines; and x &amp; y axis borders, ticks, and titles.  It’s important to note that although you may be eager to include <code class="highlighter-rouge">axis.text = element_blank()</code> to remove the x &amp; y axis labels, this will keep you from displaying any future labels in their place.  So for now, we keep the axis labels in place.</p>

<p>This essentially gives us a fresh canvas to work with. I can then plot our first layer which represents the range of average daily temperatures for 1995-2013.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">ggplot</span><span class="p">(</span><span class="n">Past</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">newDay</span><span class="p">,</span> <span class="n">Temp</span><span class="p">))</span> <span class="o">+</span>
        <span class="n">theme</span><span class="p">(</span><span class="n">plot.background</span> <span class="o">=</span> <span class="n">element_blank</span><span class="p">(),</span>
              <span class="n">panel.grid.minor</span> <span class="o">=</span> <span class="n">element_blank</span><span class="p">(),</span>
              <span class="n">panel.grid.major</span> <span class="o">=</span> <span class="n">element_blank</span><span class="p">(),</span>
              <span class="n">panel.border</span> <span class="o">=</span> <span class="n">element_blank</span><span class="p">(),</span>
              <span class="n">panel.background</span> <span class="o">=</span> <span class="n">element_blank</span><span class="p">(),</span>
              <span class="n">axis.ticks</span> <span class="o">=</span> <span class="n">element_blank</span><span class="p">(),</span>
              <span class="c1">#axis.text = element_blank(),  
</span>              <span class="n">axis.title</span> <span class="o">=</span> <span class="n">element_blank</span><span class="p">())</span> <span class="o">+</span>
        <span class="n">geom_linerange</span><span class="p">(</span><span class="n">Past</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">newDay</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="n">lower</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="n">upper</span><span class="p">),</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat2"</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="m">.1</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-7-1.png" alt="plot of chunk unnamed-chunk-7" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-2fontu"><u><font face="serif">Step 2</font></u></h4>
<p>Next, we can add the data that represents the 95% confidence interval around the daily mean temperatures for 1995-2013.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span> 
        <span class="n">geom_linerange</span><span class="p">(</span><span class="n">Past</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">newDay</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="n">avg_lower</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="n">avg_upper</span><span class="p">),</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-8-1.png" alt="plot of chunk unnamed-chunk-8" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-3fontu"><u><font face="serif">Step 3</font></u></h4>
<p>Here, we can incorporate the current year temperature data. This is also the step in which I incorporate the y-axis border.  As you can see in Tufte’s original, the y-axis border appears as dashes; however, in reality it is a solid line that has the y-axis gridlines laying over top of it which creates the dashed effect at the tickmarks of interest</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span> 
        <span class="n">geom_line</span><span class="p">(</span><span class="n">Present</span><span class="p">,</span> <span class="n">mapping</span><span class="o">=</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">newDay</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">Temp</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="m">1</span><span class="p">))</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">1</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-9-1.png" alt="plot of chunk unnamed-chunk-9" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-4fontu"><u><font face="serif">Step 4</font></u></h4>
<p>Now it’s time to add the x-axis gridlines.  These gridlines are very discreet and are meant to only provide reference points when necessary.  The only place the viewer needs to reference the degree relationship is within the “band” of data; otherwise, we want the gridlines to blend into the background to keep the ink ratio low.  Another purpose of these gridlines is to create the dashed effect on the custom y-axis gridline.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span> 
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">-20</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">-10</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">0</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">10</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">20</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">30</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">40</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">50</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">60</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">70</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">80</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">90</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span> <span class="o">=</span> <span class="m">100</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"white"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">1</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-10-1.png" alt="plot of chunk unnamed-chunk-10" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-5fontu"><u><font face="serif">Step 5</font></u></h4>
<p>Now we will start to add the x-axis gridlines.  We add the dotted gridlines to the last day of each month.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span> 
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">31</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">59</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">90</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">120</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">151</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">181</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">212</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">243</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">273</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">304</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">334</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span> <span class="o">=</span> <span class="m">365</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">linetype</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> 

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-11-1.png" alt="plot of chunk unnamed-chunk-11" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-6fontu"><u><font face="serif">Step 6</font></u></h4>
<p>Now it’s time to dress up the axis labels.  First, I limit the y-axis to a range of [-20°, 100°].  I then force the breaks to line up with the custom y-axis gridlines at even degrees in multiples of 10.  I assign the labels to the degree formatted variable <em>(“a”)</em> that I created earlier to display the degree symbol.  For the x-axis, I removed the spacing <em>(it’s hard to see but there is padded space added to the original x-axis)</em> at the edges of the x-axis, identified the breaks to place labels, and then provided the month names as the labels.</p>

<p>Don’t be fooled, there was no magical approach to identifying the best breaks for the x-axis.  I started with the day that represented the middle of each month and then moved them around as required to get the month names to appear centered.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span>
        <span class="n">coord_cartesian</span><span class="p">(</span><span class="n">ylim</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">-20</span><span class="p">,</span><span class="m">100</span><span class="p">))</span> <span class="o">+</span>
        <span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">breaks</span> <span class="o">=</span> <span class="n">seq</span><span class="p">(</span><span class="m">-20</span><span class="p">,</span><span class="m">100</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="m">10</span><span class="p">),</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">a</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">scale_x_continuous</span><span class="p">(</span><span class="n">expand</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> 
                           <span class="n">breaks</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">15</span><span class="p">,</span><span class="m">45</span><span class="p">,</span><span class="m">75</span><span class="p">,</span><span class="m">105</span><span class="p">,</span><span class="m">135</span><span class="p">,</span><span class="m">165</span><span class="p">,</span><span class="m">195</span><span class="p">,</span><span class="m">228</span><span class="p">,</span><span class="m">258</span><span class="p">,</span><span class="m">288</span><span class="p">,</span><span class="m">320</span><span class="p">,</span><span class="m">350</span><span class="p">),</span>
                           <span class="n">labels</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">"January"</span><span class="p">,</span> <span class="s2">"February"</span><span class="p">,</span> <span class="s2">"March"</span><span class="p">,</span> <span class="s2">"April"</span><span class="p">,</span>
                                      <span class="s2">"May"</span><span class="p">,</span> <span class="s2">"June"</span><span class="p">,</span> <span class="s2">"July"</span><span class="p">,</span> <span class="s2">"August"</span><span class="p">,</span> <span class="s2">"September"</span><span class="p">,</span>
                                      <span class="s2">"October"</span><span class="p">,</span> <span class="s2">"November"</span><span class="p">,</span> <span class="s2">"December"</span><span class="p">))</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-12-1.png" alt="plot of chunk unnamed-chunk-12" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-7fontu"><u><font face="serif">Step 7</font></u></h4>
<p>At this point we have the basic underlying graphic that is similar to Tufte’s temperature plot.  Now it’s time to add in the extra comparisons that I wanted to look at; this includes adding in the points that identify the days in which the current year <em>(2014)</em> had the record high and low temperature.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span>
        <span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">PresentLows</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">newDay</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">Temp</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"blue3"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_point</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">PresentHighs</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">newDay</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">Temp</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"firebrick3"</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-13-1.png" alt="plot of chunk unnamed-chunk-13" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-8fontu"><u><font face="serif">Step 8</font></u></h4>
<p>Since all data have been plotted, it’s now time to dress up the graphic with the appropriate text.  All the steps that follow involve a lot of trial and error to find the right location and spacing for the text.  So what you are seeing are the final function parameters resulting from several iterations.  We’ll start with the title and subtitle.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span>
        <span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Dayton's Weather in 2014"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="o">=</span><span class="n">element_text</span><span class="p">(</span><span class="n">face</span><span class="o">=</span><span class="s2">"bold"</span><span class="p">,</span><span class="n">hjust</span><span class="o">=</span><span class="m">.012</span><span class="p">,</span><span class="n">vjust</span><span class="o">=</span><span class="m">.8</span><span class="p">,</span><span class="n">colour</span><span class="o">=</span><span class="s2">"#3C3C3C"</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="m">20</span><span class="p">))</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">19</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">98</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"Temperature"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">4</span><span class="p">,</span> <span class="n">fontface</span><span class="o">=</span><span class="s2">"bold"</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-14-1.png" alt="plot of chunk unnamed-chunk-14" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-9fontu"><u><font face="serif">Step 9</font></u></h4>
<p>We can now add the paragraph under the subtitle that provides a little explanation about the data.  I broke this paragraph up into four separate annotations because when you apply <code class="highlighter-rouge">\n</code> within <code class="highlighter-rouge">annotate()</code> to create line breaks it will center the text rather than left justify.  There may be a way to left justify…I just couldn’t figure it out.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">66</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">93</span><span class="p">,</span> 
                 <span class="n">label</span> <span class="o">=</span> <span class="s2">"Data represents average daily temperatures. Accessible data dates back to"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"gray30"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">62</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">89</span><span class="p">,</span> 
                 <span class="n">label</span> <span class="o">=</span> <span class="s2">"January 1, 1995. Data for 2014 is only available through December 16."</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"gray30"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">64</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">85</span><span class="p">,</span> 
                 <span class="n">label</span> <span class="o">=</span> <span class="s2">"Average temperature for the year was 51.9° making 2014 the 9th coldest"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"gray30"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">18</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">81</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"year since 1995"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"gray30"</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-15-1.png" alt="plot of chunk unnamed-chunk-15" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-10fontu"><u><font face="serif">Step 10</font></u></h4>
<p>Next, we’ll create annotations to explain the points representing the days in which record highs or lows were experienced.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"segment"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">30</span><span class="p">,</span> <span class="n">xend</span> <span class="o">=</span> <span class="m">40</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">-5</span><span class="p">,</span> <span class="n">yend</span> <span class="o">=</span> <span class="m">-10</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"blue3"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">65</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">-10</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"We had 35 days that were the"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"blue3"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">56</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">-14</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"coldest since 1995"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"blue3"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"segment"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">302</span><span class="p">,</span> <span class="n">xend</span> <span class="o">=</span> <span class="m">307</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">74</span><span class="p">,</span> <span class="n">yend</span> <span class="o">=</span> <span class="m">82</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"firebrick3"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">333</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">82</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"We had 19 days that were the"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"firebrick3"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">324</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">78</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"hottest since 1995"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"firebrick3"</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-16-1.png" alt="plot of chunk unnamed-chunk-16" /></p>

<p><br /></p>

<h4 id="ufont-faceserifstep-11fontu"><u><font face="serif">Step 11</font></u></h4>
<p>The final step is to add a legend to explain to the reader the difference between the different data point layers.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">p</span> <span class="o">&lt;-</span> <span class="n">p</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"segment"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">181</span><span class="p">,</span> <span class="n">xend</span> <span class="o">=</span> <span class="m">181</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">5</span><span class="p">,</span> <span class="n">yend</span> <span class="o">=</span> <span class="m">25</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat2"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"segment"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">181</span><span class="p">,</span> <span class="n">xend</span> <span class="o">=</span> <span class="m">181</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">12</span><span class="p">,</span> <span class="n">yend</span> <span class="o">=</span> <span class="m">18</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">3</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">geom_line</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">legend_data</span><span class="p">,</span> <span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"segment"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">183</span><span class="p">,</span> <span class="n">xend</span> <span class="o">=</span> <span class="m">185</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">17.7</span><span class="p">,</span> <span class="n">yend</span> <span class="o">=</span> <span class="m">17.7</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"segment"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">183</span><span class="p">,</span> <span class="n">xend</span> <span class="o">=</span> <span class="m">185</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">12.2</span><span class="p">,</span> <span class="n">yend</span> <span class="o">=</span> <span class="m">12.2</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"segment"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">185</span><span class="p">,</span> <span class="n">xend</span> <span class="o">=</span> <span class="m">185</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">12.2</span><span class="p">,</span> <span class="n">yend</span> <span class="o">=</span> <span class="m">17.7</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="s2">"wheat4"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">.5</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">196</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">14.75</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"NORMAL RANGE"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">2</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"gray30"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">162</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">14.75</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"2014 TEMPERATURE"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">2</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"gray30"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">193</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">25</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"RECORD HIGH"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">2</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"gray30"</span><span class="p">)</span> <span class="o">+</span>
        <span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="m">193</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="m">5</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">"RECORD LOW"</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">2</span><span class="p">,</span> <span class="n">colour</span><span class="o">=</span><span class="s2">"gray30"</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span></code></pre></figure>

<p><img src="http://bradleyboehmke.github.io/figure/source/new-post/2015-12-28-new-post/unnamed-chunk-17-1.png" alt="plot of chunk unnamed-chunk-17" /></p>

<p><br /></p>

<h3 id="font-faceserifconclusionfont"><font face="serif">Conclusion</font></h3>
<p>The end result is, what I believe, a wonderful looking graphic that compares quite well with the original and, most importantly, tells a good story about last year’s weather.  If satisfaction could be measured by “retweets”, then Edward Tufte’s retweet of this graphic provides me with enough gratification to label it a success.</p>


  </article>

</div>





      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">

      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
        <center>
          <li>
            <a href="https://github.com/bradleyboehmke">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>
            </a>
            &nbsp;
            <a href="http://www.twitter.com/bradleyboehmke">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>
            </a>
            &nbsp;
            <a href="https://www.linkedin.com/in/brad-boehmke-ph-d-9b0a257">
              <span class="icon  icon--linkedin">
                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"  width="25" height="25" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#828282" d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51V7.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z" fill-rule="nonzero"/>
                </svg>
              </span>
            </a>
          </li>

        </ul>
        </center>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
