<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Bradley Boehmke</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="http://bradleyboehmke.github.io//css/main.css">
    <link rel="canonical" href="http://bradleyboehmke.github.io/http://bradleyboehmke.github.io//tutorials/functions">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="http://bradleyboehmke.github.io/">Bradley Boehmke</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//about/">About</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//categoryview/">Archive</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//cv/">CV</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//tutorials/">Tutorials</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://bradleyboehmke.github.io//tutorials/scraping_with_apis_DSCOE.Rmd">Scraping Data with APIs</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <article class="post-content">
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<p><a href="index">R Vocab Topics</a> » <a href="functions_loops">Functions</a> » Creating functions</p>

<p><br /></p>

<ul>
  <li><a href="#components">Function components</a></li>
  <li><a href="#arguments">Arguments</a></li>
  <li><a href="#scoping">Scoping rules</a></li>
  <li><a href="#lazy">Lazy evaluation</a></li>
  <li><a href="#return">Returning multiple outputs from a function</a></li>
  <li><a href="#invalid">Dealing with invalid parameters</a></li>
  <li><a href="#sourcing">Saving and sourcing functions</a></li>
  <li><a href="#resources">Additional resources</a></li>
</ul>

<p><br /></p>

<p><a name="components"></a></p>

<h1 id="function-components">Function Components</h1>
<p>With the exception of <a href="https://cran.r-project.org/doc/manuals/r-release/R-ints.html#g_t_002eInternal-vs-_002ePrimitive">primitive functions</a> all R functions have three parts:</p>

<ul>
  <li><code class="highlighter-rouge">body()</code>: the code inside the function</li>
  <li><code class="highlighter-rouge">formals()</code>: the list of arguments used to call the function</li>
  <li><code class="highlighter-rouge">environment()</code>: the mapping of the location(s) of the function’s variables</li>
</ul>

<p>For example, let’s build a function that calculates the present value (PV) of a single future sum.  The equation for a single sum PV is: <em>PV = FV/(1+r)<sup>n</sup></em> where FV is future value, r is the interest rate, and n is the number of periods.  In the function that follows the <code class="highlighter-rouge">body</code> of the function includes the equation <em>FV/(1+r)<sup>n</sup></em> and then rounding the output to two decimals. The <code class="highlighter-rouge">formals</code> (or arguments) required for the function include <code class="highlighter-rouge">FV</code>, <code class="highlighter-rouge">r</code>, and <code class="highlighter-rouge">n</code>.  And the <code class="highlighter-rouge">environment</code> shows that function operates in the global environment.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">PV</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">FV</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PV</span> <span class="o">&lt;-</span> <span class="n">FV</span><span class="o">/</span><span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
        <span class="n">round</span><span class="p">(</span><span class="n">PV</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">body</span><span class="p">(</span><span class="n">PV</span><span class="p">)</span>
<span class="c1">## {
##     PV &lt;- FV/(1 + r)^n
##     round(PV, 2)
## }
</span>
<span class="n">formals</span><span class="p">(</span><span class="n">PV</span><span class="p">)</span>
<span class="c1">## $FV
## 
## 
## $r
## 
## 
## $n
</span>
<span class="n">environment</span><span class="p">(</span><span class="n">PV</span><span class="p">)</span>
<span class="err">##</span> <span class="o">&lt;</span><span class="n">environment</span><span class="o">:</span> <span class="n">R_GlobalEnv</span><span class="o">&gt;</span></code></pre></figure>

<p><small><a href="#">Go to top</a></small></p>

<p><br /></p>

<p><a name="arguments"></a></p>

<h1 id="arguments">Arguments</h1>
<p>To perform the <code class="highlighter-rouge">PV()</code> function we can call the arguments in different ways.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># using argument names
</span><span class="n">PV</span><span class="p">(</span><span class="n">FV</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="m">.08</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="c1">## [1] 680.58
</span>
<span class="c1"># same as above but without using names (aka "positional matching")
</span><span class="n">PV</span><span class="p">(</span><span class="m">1000</span><span class="p">,</span> <span class="m">.08</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
<span class="c1">## [1] 680.58
</span>
<span class="c1"># if using names you can change the order
</span><span class="n">PV</span><span class="p">(</span><span class="n">r</span> <span class="o">=</span> <span class="m">.08</span><span class="p">,</span> <span class="n">FV</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span>
<span class="c1">## [1] 680.58
</span>
<span class="c1"># if not using names you must insert arguments in proper order
# in this e.g. the function assumes FV = .08, r = 1000, and n = 5
</span><span class="n">PV</span><span class="p">(</span><span class="m">.08</span><span class="p">,</span> <span class="m">1000</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0</span></code></pre></figure>

<p>Note that when building a function you can also set default values for arguments.  In our original <code class="highlighter-rouge">PV()</code> we did not provide any default values so if we do not supply all the argument parameters an error will be returned.  However, if we set default values then the function will use the stated default if any parameters are missing:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># missing the n argument
</span><span class="n">PV</span><span class="p">(</span><span class="m">1000</span><span class="p">,</span> <span class="m">.08</span><span class="p">)</span>
<span class="c1">## Error in PV(1000, 0.08): argument "n" is missing, with no default
</span>
<span class="c1"># creating default argument values
</span><span class="n">PV</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">FV</span> <span class="o">=</span> <span class="m">1000</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="m">.08</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="m">5</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">PV</span> <span class="o">&lt;-</span> <span class="n">FV</span><span class="o">/</span><span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
        <span class="n">round</span><span class="p">(</span><span class="n">PV</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># function will use default n value
</span><span class="n">PV</span><span class="p">(</span><span class="m">1000</span><span class="p">,</span> <span class="m">.08</span><span class="p">)</span>
<span class="c1">## [1] 680.58
</span>
<span class="c1"># specifying a different n value
</span><span class="n">PV</span><span class="p">(</span><span class="m">1000</span><span class="p">,</span> <span class="m">.08</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">793.83</span></code></pre></figure>

<p><small><a href="#">Go to top</a></small></p>

<p><br /></p>

<p><a name="scoping"></a></p>

<h1 id="scoping-rules">Scoping Rules</h1>
<p>Scoping refers to the set of rules a programming language uses to lookup the value to variables and/or symbols.  The following illustrates the basic concept behind the lexical scoping rules that R follows.</p>

<p>A function will first look inside the function to identify all the variables being called.  If all variables exist then their is no additional search required to identify variables.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">PV1</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">FV</span> <span class="o">&lt;-</span> <span class="m">1000</span> 
        <span class="n">r</span> <span class="o">&lt;-</span> <span class="m">.08</span>
        <span class="n">n</span> <span class="o">&lt;-</span> <span class="m">5</span>
        <span class="n">FV</span><span class="o">/</span><span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
<span class="p">}</span>

<span class="n">PV1</span><span class="p">()</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">680.5832</span></code></pre></figure>

<p>However, if a variable does not exist within the function, R will look one level up to see if the variable exists.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># the FV variable is outside the function environment
</span><span class="n">FV</span> <span class="o">&lt;-</span> <span class="m">1000</span> 

<span class="n">PV2</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">r</span> <span class="o">&lt;-</span> <span class="m">.08</span>
        <span class="n">n</span> <span class="o">&lt;-</span> <span class="m">5</span>
        <span class="n">FV</span><span class="o">/</span><span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
<span class="p">}</span>

<span class="n">PV2</span><span class="p">()</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">680.5832</span></code></pre></figure>

<p>This same concept applies if you have functions embeded within functions:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">FV</span> <span class="o">&lt;-</span> <span class="m">1000</span> 

<span class="n">PV3</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">r</span> <span class="o">&lt;-</span> <span class="m">.08</span>
        <span class="n">n</span> <span class="o">&lt;-</span> <span class="m">5</span>
        <span class="n">denominator</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
        <span class="p">}</span>
        <span class="n">FV</span><span class="o">/</span><span class="n">denominator</span><span class="p">()</span>
<span class="p">}</span>

<span class="n">PV3</span><span class="p">()</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">680.5832</span></code></pre></figure>

<p>This also applies for functions in which some arguments are called but not all variables used in the body are identified as arguments:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># n is specified within the function
</span><span class="n">PV4</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">FV</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">n</span> <span class="o">&lt;-</span> <span class="m">5</span>
        <span class="n">FV</span><span class="o">/</span><span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
<span class="p">}</span>

<span class="n">PV4</span><span class="p">(</span><span class="m">1000</span><span class="p">,</span> <span class="m">.08</span><span class="p">)</span>
<span class="c1">## [1] 680.5832
</span>
<span class="c1"># n is specified within the function and
# r is specified outside the function
</span><span class="n">r</span> <span class="o">&lt;-</span> <span class="m">0.08</span>

<span class="n">PV5</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">FV</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">n</span> <span class="o">&lt;-</span> <span class="m">5</span>
        <span class="n">FV</span><span class="o">/</span><span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
<span class="p">}</span>

<span class="n">PV5</span><span class="p">(</span><span class="m">1000</span><span class="p">)</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">680.5832</span></code></pre></figure>

<p><small><a href="#">Go to top</a></small></p>

<p><br /></p>

<p><a name="lazy"></a></p>

<h1 id="lazy-evaluation">Lazy Evaluation</h1>
<p>R functions perform “lazy” evaluation in which arguments are only evaluated if required in the body of the function.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># the y argument is not used so not included it causes
# no harm
</span><span class="n">lazy</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">){</span>
        <span class="n">x</span><span class="o">*</span><span class="m">2</span>
<span class="p">}</span>
<span class="n">lazy</span><span class="p">(</span><span class="m">4</span><span class="p">)</span>
<span class="c1">## [1] 8
</span>
<span class="c1"># however, if both arguments are required in the body
# an error will result if an argument is missing
</span><span class="n">lazy2</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">){</span>
        <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="m">2</span>
<span class="p">}</span>
<span class="n">lazy2</span><span class="p">(</span><span class="m">4</span><span class="p">)</span>
<span class="err">##</span> <span class="n">Error</span> <span class="k">in</span> <span class="n">lazy2</span><span class="p">(</span><span class="m">4</span><span class="p">)</span><span class="o">:</span> <span class="n">argument</span> <span class="s2">"y"</span> <span class="n">is</span> <span class="n">missing</span><span class="p">,</span> <span class="n">with</span> <span class="n">no</span> <span class="n">default</span></code></pre></figure>

<p><small><a href="#">Go to top</a></small></p>

<p><br /></p>

<p><a name="return"></a></p>

<h1 id="returning-multiple-outputs-from-a-function">Returning Multiple Outputs from a Function</h1>
<p>If a function performs multiple tasks and therefore has multiple results to report then we have to include the <code class="highlighter-rouge">c()</code> function inside the function to display all the results. If you do not include the <code class="highlighter-rouge">c()</code> function then the function output will only return the last expression:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">bad</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="m">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
        <span class="n">x</span> <span class="o">+</span> <span class="m">2</span><span class="o">*</span><span class="n">y</span>
        <span class="m">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="m">2</span><span class="o">*</span><span class="n">y</span>
        <span class="n">x</span><span class="o">/</span><span class="n">y</span>
<span class="p">}</span>
<span class="n">bad</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="c1">## [1] 0.5
</span>
<span class="n">good</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">output1</span> <span class="o">&lt;-</span> <span class="m">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
        <span class="n">output2</span> <span class="o">&lt;-</span> <span class="n">x</span> <span class="o">+</span> <span class="m">2</span><span class="o">*</span><span class="n">y</span>
        <span class="n">output3</span> <span class="o">&lt;-</span> <span class="m">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="m">2</span><span class="o">*</span><span class="n">y</span>
        <span class="n">output4</span> <span class="o">&lt;-</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
        <span class="n">c</span><span class="p">(</span><span class="n">output1</span><span class="p">,</span> <span class="n">output2</span><span class="p">,</span> <span class="n">output3</span><span class="p">,</span> <span class="n">output4</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">good</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">4.0</span> <span class="m">5.0</span> <span class="m">6.0</span> <span class="m">0.5</span></code></pre></figure>

<p>Furthermore, when we have a function which performs multiple tasks (i.e. computes multiple computations) then it is often useful to save the results in a list.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">good_list</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">output1</span> <span class="o">&lt;-</span> <span class="m">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
        <span class="n">output2</span> <span class="o">&lt;-</span> <span class="n">x</span> <span class="o">+</span> <span class="m">2</span><span class="o">*</span><span class="n">y</span>
        <span class="n">output3</span> <span class="o">&lt;-</span> <span class="m">2</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="m">2</span><span class="o">*</span><span class="n">y</span>
        <span class="n">output4</span> <span class="o">&lt;-</span> <span class="n">x</span><span class="o">/</span><span class="n">y</span>
        <span class="n">c</span><span class="p">(</span><span class="n">list</span><span class="p">(</span><span class="n">Output1</span> <span class="o">=</span> <span class="n">output1</span><span class="p">,</span> <span class="n">Output2</span> <span class="o">=</span> <span class="n">output2</span><span class="p">,</span> 
               <span class="n">Output3</span> <span class="o">=</span> <span class="n">output3</span><span class="p">,</span> <span class="n">Output4</span> <span class="o">=</span> <span class="n">output4</span><span class="p">))</span>
<span class="p">}</span>
<span class="n">good_list</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="c1">## $Output1
## [1] 4
## 
## $Output2
## [1] 5
## 
## $Output3
## [1] 6
## 
## $Output4
</span><span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0.5</span></code></pre></figure>

<p><small><a href="#">Go to top</a></small></p>

<p><br /></p>

<p><a name="invalid"></a></p>

<h1 id="dealing-with-invalid-parameters">Dealing with Invalid Parameters</h1>
<p>For functions that will be used again, and especially for those used by someone other than the creator of the function, it is good to check the validity of arguments within the function.  One way to do this is to use the <code class="highlighter-rouge">stop()</code> function.  The following uses an <code class="highlighter-rouge">if()</code> statement to check if the class of each argument is numeric.  If one or more arguments are not numeric then the <code class="highlighter-rouge">stop()</code> function will be triggered to provide a meaning message to the user.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">PV</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">FV</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">is.numeric</span><span class="p">(</span><span class="n">FV</span><span class="p">)</span> <span class="o">|</span> <span class="o">!</span><span class="n">is.numeric</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">|</span> <span class="o">!</span><span class="n">is.numeric</span><span class="p">(</span><span class="n">n</span><span class="p">)){</span>
                <span class="n">stop</span><span class="p">(</span><span class="s1">'This function only works for numeric inputs!\n'</span><span class="p">,</span> 
                     <span class="s1">'You have provided objects of the following classes:\n'</span><span class="p">,</span> 
                     <span class="s1">'FV: '</span><span class="p">,</span> <span class="n">class</span><span class="p">(</span><span class="n">FV</span><span class="p">),</span> <span class="s1">'\n'</span><span class="p">,</span>
                     <span class="s1">'r: '</span><span class="p">,</span> <span class="n">class</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="s1">'\n'</span><span class="p">,</span>
                     <span class="s1">'n: '</span><span class="p">,</span> <span class="n">class</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="p">}</span>
        
        <span class="n">PV</span> <span class="o">&lt;-</span> <span class="n">FV</span><span class="o">/</span><span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
        <span class="n">round</span><span class="p">(</span><span class="n">PV</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">PV</span><span class="p">(</span><span class="s2">"1000"</span><span class="p">,</span> <span class="m">0.08</span><span class="p">,</span> <span class="s2">"5"</span><span class="p">)</span>
<span class="c1">## Error in PV("1000", 0.08, "5"): This function only works for numeric inputs!
## You have provided objects of the following classes:
## FV: character
## r: numeric
</span><span class="err">##</span> <span class="n">n</span><span class="o">:</span> <span class="n">character</span></code></pre></figure>

<p>Another concern is dealing with missing or <code class="highlighter-rouge">NA</code> values.  Lets say you wanted to perform the <code class="highlighter-rouge">PV()</code> function on a vector of potential future values.  The function as is will output <code class="highlighter-rouge">NA</code> in place of any missing values in the FV input vector.  If you want to remove the missing values then you can incorporate the <code class="highlighter-rouge">na.rm</code> parameter in the function arguments along with an <code class="highlighter-rouge">if</code> statement to remove missing values if <code class="highlighter-rouge">na.rm = TRUE</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># vector of future value inputs
</span><span class="n">fv</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="m">800</span><span class="p">,</span> <span class="m">900</span><span class="p">,</span> <span class="n">NA</span><span class="p">,</span> <span class="m">1100</span><span class="p">,</span> <span class="n">NA</span><span class="p">)</span>

<span class="n">PV</span><span class="p">(</span><span class="n">fv</span><span class="p">,</span> <span class="m">.08</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
<span class="c1">## [1] 544.47 612.52     NA 748.64     NA
</span>
<span class="n">PV</span> <span class="o">&lt;-</span> <span class="k">function</span><span class="p">(</span><span class="n">FV</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="n">FALSE</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">is.numeric</span><span class="p">(</span><span class="n">FV</span><span class="p">)</span> <span class="o">|</span> <span class="o">!</span><span class="n">is.numeric</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">|</span> <span class="o">!</span><span class="n">is.numeric</span><span class="p">(</span><span class="n">n</span><span class="p">)){</span>
                <span class="n">stop</span><span class="p">(</span><span class="s1">'This function only works for numeric inputs!\n'</span><span class="p">,</span> 
                     <span class="s1">'You have provided objects of the following classes:\n'</span><span class="p">,</span> 
                     <span class="s1">'FV: '</span><span class="p">,</span> <span class="n">class</span><span class="p">(</span><span class="n">FV</span><span class="p">),</span> <span class="s1">'\n'</span><span class="p">,</span>
                     <span class="s1">'r: '</span><span class="p">,</span> <span class="n">class</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="s1">'\n'</span><span class="p">,</span>
                     <span class="s1">'n: '</span><span class="p">,</span> <span class="n">class</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
        <span class="p">}</span>
        
        <span class="k">if</span><span class="p">(</span><span class="n">na.rm</span> <span class="o">==</span> <span class="n">TRUE</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">FV</span> <span class="o">&lt;-</span> <span class="n">FV</span><span class="p">[</span><span class="o">!</span><span class="n">is.na</span><span class="p">(</span><span class="n">FV</span><span class="p">)]</span>
        <span class="p">}</span>
        
        <span class="n">PV</span> <span class="o">&lt;-</span> <span class="n">FV</span><span class="o">/</span><span class="p">(</span><span class="m">1</span><span class="o">+</span><span class="n">r</span><span class="p">)</span><span class="o">^</span><span class="n">n</span>
        <span class="n">round</span><span class="p">(</span><span class="n">PV</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">PV</span><span class="p">(</span><span class="n">fv</span><span class="p">,</span> <span class="m">0.08</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="n">na.rm</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">)</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">544.47</span> <span class="m">612.52</span> <span class="m">748.64</span></code></pre></figure>

<p><small><a href="#">Go to top</a></small></p>

<p><br /></p>

<p><a name="sourcing"></a></p>

<h1 id="saving-and-sourcing-functions">Saving and Sourcing Functions</h1>
<p>If you want to save a function to be used at other times and within other scripts there are two main ways to do this.  One way is to build a package which is discussed in more details <a href="http://bradleyboehmke.github.io/tutorials/basics/packages/">here</a>.  Another option, and the one discussed here, is to save the function in a script.  For example, we can save a script that contains the <code class="highlighter-rouge">PV()</code> function and save this script as <code class="highlighter-rouge">PV.R</code>.</p>

<center>
<img src="/public/images/r_vocab/shot1.png" alt="Save PV Function as a Script" />
</center>
<p><br />
Now, if we are working in a fresh script you’ll see that we have no objects and functions in our working environment:</p>

<center>
<img src="/public/images/r_vocab/shot2.png" alt="Fresh Script" />
</center>
<p><br />
If we want to use the PV function in this new script we can simply read in the function by sourcing the script using <code class="highlighter-rouge">source("PV.R")</code>.  Now, you’ll notice that we have the <code class="highlighter-rouge">PV()</code> function in our global environment and can use it as normal.  Note that if you are working in a different directory then where the <code class="highlighter-rouge">PV.R</code> file is located you’ll need to include the proper command to access the relevant directory.</p>

<center>
<img src="/public/images/r_vocab/shot3.png" alt="PV Function Sourced In" />
</center>

<p><small><a href="#">Go to top</a></small></p>

<p><br /></p>

<p><a name="resources"></a></p>

<h1 id="additional-resources">Additional Resources</h1>
<p>Functions are a fundamental building block of R and writing functions is a core activity of an R programmer. It represents the key step of the transition from a mere “user” to a developer who creates new functionality for R.  As a result, its important to turn your existing, informal knowledge of functions into a rigorous understanding of what functions are and how they work.  A few additional resources that can help you get to the next step of understanding functions include:</p>

<ul>
  <li><a href="http://adv-r.had.co.nz/Functions.html">Hadley Wickham’s Advanced R book</a></li>
  <li><a href="https://leanpub.com/rprogramming">Roger Peng’s R Programming for Data Science book</a></li>
  <li><a href="https://www.datacamp.com/courses/intermediate-r?utm_source=functions_r_tutorial_post&amp;utm_medium=blog&amp;utm_campaign=functions_r_tutorial_post">DataCamp’s Intermediate R course</a></li>
  <li><a href="https://www.coursera.org/course/rprog">Coursera’s R Programming course</a></li>
</ul>

<p><small><a href="#">Go to top</a></small></p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">

      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
        <center>
          <li>
            <a href="https://github.com/bradleyboehmke">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>
            </a>
            &nbsp;
            <a href="http://www.twitter.com/bradleyboehmke">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>
            </a>
            &nbsp;
            <a href="https://www.linkedin.com/in/brad-boehmke-ph-d-9b0a257">
              <span class="icon  icon--linkedin">
                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"  width="25" height="25" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#828282" d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51V7.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z" fill-rule="nonzero"/>
                </svg>
              </span>
            </a>
          </li>

        </ul>
        </center>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
