<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>R Programming @ UC</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="http://r-uc.github.io//css/main.css">
    <link rel="canonical" href="http://r-uc.github.io/http://r-uc.github.io//tutorials/stringr_regex_functions">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="http://r-uc.github.io/">R Programming @ UC</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="http://r-uc.github.io//404">404 - Page not found</a>
          
        
          
          <a class="page-link" href="http://r-uc.github.io//about/">About</a>
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://r-uc.github.io//categoryview/">Archive</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://r-uc.github.io//cv/">CV</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://r-uc.github.io//tutorials/">Tutorials</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
          <a class="page-link" href="http://r-uc.github.io//tutorials/scraping_with_apis_DSCOE.Rmd">Scraping Data with APIs</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <article class="post-content">
    <p><a href="index">R Vocab Topics</a> » <a href="characters">Character Strings</a> » <a href="regex">Regular Expressions</a> » <a href="regex_functions">Regex Functions</a> » regex functions in stringr</p>

<ul>
  <li><a href="#install">Install <code class="highlighter-rouge">stringr</code> package</a></li>
  <li><a href="#detect">Detecting patterns</a></li>
  <li><a href="#locate">Locating patterns</a></li>
  <li><a href="#extract">Extracting matches</a></li>
  <li><a href="#replace">Replacing matches</a></li>
  <li><a href="#split">String splitting</a></li>
</ul>

<p><br /></p>

<p><a name="install"></a></p>

<h2 id="install-stringr-package">Install stringr Package</h2>
<p>To install and load the <code class="highlighter-rouge">stringr</code> package</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># install stringr package
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"stringr"</span><span class="p">)</span>

<span class="c1"># load package
</span><span class="n">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span></code></pre></figure>

<p><br /></p>

<p><a name="detect"></a></p>

<h2 id="detecting-patterns">Detecting Patterns</h2>
<p>To detecting whether a pattern is present (or absent) in a string vector use the <code class="highlighter-rouge">str_detect()</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># use the built in data set 'state.name'
</span><span class="n">head</span><span class="p">(</span><span class="n">state.name</span><span class="p">)</span>
<span class="c1">## [1] "Alabama"    "Alaska"     "Arizona"    "Arkansas"   "California"
## [6] "Colorado"
</span>
<span class="n">str_detect</span><span class="p">(</span><span class="n">state.name</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"New"</span><span class="p">)</span>
<span class="c1">##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [12] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [23] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE
## [34] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
## [45] FALSE FALSE FALSE FALSE FALSE FALSE
</span>
<span class="c1"># count the total matches by wrapping with sum
</span><span class="n">sum</span><span class="p">(</span><span class="n">str_detect</span><span class="p">(</span><span class="n">state.name</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"New"</span><span class="p">))</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">4</span></code></pre></figure>

<p>☛ <em>This function is a wraper of <a href="main_regex_functions#grepl"><code class="highlighter-rouge">grepl()</code></a></em></p>

<p><br /></p>

<p><a name="locate"></a></p>

<h2 id="locating-patterns">Locating Patterns</h2>
<p>To <em>locate</em> the occurences of patterns stringr offers two options:</p>

<ul>
  <li><a href="#locate_first">Locate first match</a></li>
  <li><a href="#locate_all">Locate all matches</a></li>
</ul>

<p><br /></p>

<p><a name="locate_first"></a></p>

<h3 id="locate-first-match">Locate First Match</h3>
<p>To locate the position of the first occurrence of a pattern in a string vector use <code class="highlighter-rouge">str_locate()</code>:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">x</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="s2">"abcd"</span><span class="p">,</span> <span class="s2">"a22bc1d"</span><span class="p">,</span> <span class="s2">"ab3453cd46"</span><span class="p">,</span> <span class="s2">"a1bc44d"</span><span class="p">)</span>

<span class="c1"># locate 1st sequence of 1 or more consecutive numbers
</span><span class="n">str_locate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">"[0-9]+"</span><span class="p">)</span>
<span class="c1">##      start end
## [1,]    NA  NA
## [2,]     2   3
## [3,]     3   6
</span><span class="err">##</span> <span class="p">[</span><span class="m">4</span><span class="p">,]</span>     <span class="m">2</span>   <span class="m">2</span></code></pre></figure>

<p>☛ <em>To understand the regex syntax used for this pattern visit the <a href="regex_syntax">Regex syntax page</a></em></p>

<p>The output provides the starting and ending position of the first match found within each element.</p>

<p><br /></p>

<p><a name="locate_all"></a></p>

<h3 id="locate-all-matches">Locate All Matches</h3>
<p>To locate the positions of all pattern match occurrences in a character vector use <code class="highlighter-rouge">str_locate_all()</code>:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># locate all sequences of 1 or more consecutive numbers
</span><span class="n">str_locate_all</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s2">"[0-9]+"</span><span class="p">)</span>
<span class="c1">## [[1]]
##      start end
## 
## [[2]]
##      start end
## [1,]     2   3
## [2,]     6   6
## 
## [[3]]
##      start end
## [1,]     3   6
## [2,]     9  10
## 
## [[4]]
##      start end
## [1,]     2   2
</span><span class="err">##</span> <span class="p">[</span><span class="m">2</span><span class="p">,]</span>     <span class="m">5</span>   <span class="m">6</span></code></pre></figure>

<p>☛ <em>To understand the regex syntax used for this pattern visit the <a href="regex_syntax">Regex syntax page</a></em></p>

<p>The output provides a list the same length as the number of elements in the vector.  Each list item will provide the starting and ending positions for each pattern match occurrence in its respective element.</p>

<p><br /></p>

<p><a name="extract"></a></p>

<h2 id="extracting-patterns">Extracting Patterns</h2>
<p>For extracting a string containing a pattern, stringr offers two primary options:</p>

<ul>
  <li><a href="#extract_first">Extract first match</a></li>
  <li><a href="#extract_all">Extract all matches</a></li>
</ul>

<p><br /></p>

<p><a name="extract_first"></a></p>

<h3 id="extract-first-match">Extract First Match</h3>
<p>To extract first occurrence of a pattern in a character vector use <code class="highlighter-rouge">str_extract()</code>:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">y</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="s2">"I use R #useR2014"</span><span class="p">,</span> <span class="s2">"I use R and love R #useR2015"</span><span class="p">,</span> <span class="s2">"Beer"</span><span class="p">)</span>

<span class="n">str_extract</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"R"</span><span class="p">)</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s2">"R"</span> <span class="s2">"R"</span> <span class="n">NA</span></code></pre></figure>

<p>Output is same length as string and if no match is found output is NA for that element.</p>

<p><br /></p>

<p><a name="extract_all"></a></p>

<h3 id="extract-all-matches">Extract All Matches</h3>
<p>To extract all occurrences of a pattern in a character vector use <code class="highlighter-rouge">str_extract_all()</code>:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">str_extract_all</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"[[:punct:]]*[a-zA-Z0-9]*R[a-zA-Z0-9]*"</span><span class="p">)</span>
<span class="c1">## [[1]]
## [1] "R"         "#useR2014"
## 
## [[2]]
## [1] "R"         "R"         "#useR2015"
## 
## [[3]]
</span><span class="err">##</span> <span class="n">character</span><span class="p">(</span><span class="m">0</span><span class="p">)</span></code></pre></figure>

<p>☛ <em>To understand the regex syntax used for this pattern visit the <a href="regex_syntax">Regex syntax page</a></em></p>

<p>The output provides a list the same length as the number of elements in the vector.  Each list item will provide the matching pattern occurrence within that relative vector element.</p>

<p><br /></p>

<p><a name="replace"></a></p>

<h2 id="replacing-patterns">Replacing Patterns</h2>
<p>For extracting a string containing a pattern, stringr offers two options:</p>

<ul>
  <li><a href="#replace_first">Replace first match</a></li>
  <li><a href="#replace_all">Replace all matches</a></li>
</ul>

<p><br /></p>

<p><a name="replace_first"></a></p>

<h3 id="replace-first-match">Replace First Match</h3>
<p>To extract first occurrence of a pattern in a character vector use <code class="highlighter-rouge">str_replace()</code>:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">cities</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="s2">"New York"</span><span class="p">,</span> <span class="s2">"new new York"</span><span class="p">,</span> <span class="s2">"New New New York"</span><span class="p">)</span>
<span class="n">cities</span>
<span class="c1">## [1] "New York"         "new new York"     "New New New York"
</span>
<span class="c1"># case sensitive
</span><span class="n">str_replace</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"New"</span><span class="p">,</span> <span class="n">replacement</span> <span class="o">=</span> <span class="s2">"Old"</span><span class="p">)</span>
<span class="c1">## [1] "Old York"         "new new York"     "Old New New York"
</span>
<span class="c1"># to deal with case sensitivities use Regex syntax in the 'pattern' argument
</span><span class="n">str_replace</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"[N]*[n]*ew"</span><span class="p">,</span> <span class="n">replacement</span> <span class="o">=</span> <span class="s2">"Old"</span><span class="p">)</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s2">"Old York"</span>         <span class="s2">"Old new York"</span>     <span class="s2">"Old New New York"</span></code></pre></figure>

<p>☛ <em>This function is a wraper of <a href="main_regex_functions#replacement"><code class="highlighter-rouge">sub()</code></a></em></p>

<p>☛ <em>For more information on the pattern argument applied read about character classes and quantifiers at the <a href="regex_syntax">Regex syntax page</a></em></p>

<p><br /></p>

<p><a name="replace_all"></a></p>

<h3 id="replace-all-matches">Replace All Matches</h3>
<p>To extract all occurrences of a pattern in a character vector use <code class="highlighter-rouge">str_replace_all()</code>:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">str_replace_all</span><span class="p">(</span><span class="n">cities</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"[N]*[n]*ew"</span><span class="p">,</span> <span class="n">replacement</span> <span class="o">=</span> <span class="s2">"Old"</span><span class="p">)</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s2">"Old York"</span>         <span class="s2">"Old Old York"</span>     <span class="s2">"Old Old Old York"</span></code></pre></figure>

<p>☛ <em>This function is a wraper of <a href="main_regex_functions#replacement"><code class="highlighter-rouge">gsub()</code></a></em></p>

<p><br /></p>

<p><a name="split"></a></p>

<h2 id="string-splitting">String Splitting</h2>
<p>To split the elements of a character string use <code class="highlighter-rouge">str_split()</code>:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">z</span> <span class="o">&lt;-</span> <span class="s2">"The day after I will take a break and drink a beer."</span>
<span class="n">str_split</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">" "</span><span class="p">)</span>
<span class="c1">## [[1]]
##  [1] "The"   "day"   "after" "I"     "will"  "take"  "a"     "break"
##  [9] "and"   "drink" "a"     "beer."
</span>
<span class="n">a</span> <span class="o">&lt;-</span> <span class="s2">"Alabama-Alaska-Arizona-Arkansas-California"</span>
<span class="n">str_split</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"-"</span><span class="p">)</span>
<span class="c1">## [[1]]
</span><span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s2">"Alabama"</span>    <span class="s2">"Alaska"</span>     <span class="s2">"Arizona"</span>    <span class="s2">"Arkansas"</span>   <span class="s2">"California"</span></code></pre></figure>

<p>Note that the output of <code class="highlighter-rouge">strs_plit()</code> is a list.  To convert the output to a simple atomic vector simply wrap in <code class="highlighter-rouge">unlist()</code>:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">unlist</span><span class="p">(</span><span class="n">str_split</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">pattern</span> <span class="o">=</span> <span class="s2">"-"</span><span class="p">))</span>
<span class="err">##</span> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s2">"Alabama"</span>    <span class="s2">"Alaska"</span>     <span class="s2">"Arizona"</span>    <span class="s2">"Arkansas"</span>   <span class="s2">"California"</span></code></pre></figure>

<p>☛ <em>This function is a wraper of <a href="http://bradleyboehmke.github.io/tutorials/main_regex_functions#splitting"><code class="highlighter-rouge">strsplit()</code></a></em></p>

<p><br /></p>

<p><small><a href="#">Go to top</a></small></p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">

      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
        <center>
          <li>
            <a href="https://github.com/bradleyboehmke">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>
            </a>
            &nbsp;
            <a href="http://www.twitter.com/bradleyboehmke">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>
            </a>
            &nbsp;
            <a href="https://www.linkedin.com/in/brad-boehmke-ph-d-9b0a257">
              <span class="icon  icon--linkedin">
                <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"  width="25" height="25" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path fill="#828282" d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51V7.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z" fill-rule="nonzero"/>
                </svg>
              </span>
            </a>
          </li>

        </ul>
        </center>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text"></p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
